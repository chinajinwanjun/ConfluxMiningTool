@{
    ViewData["Title"] = "Privacy Policy";
}
@using Microsoft.Extensions.Configuration
@inject IConfiguration Configuration
<script src="~/assets/Chart.min.js"></script>
<script src="~/assets/utils.js"></script>
<link rel="stylesheet" type="text/css" href="~/assets/style.css" />



<div class="content">
    <!-- Panel -->
    <div class="card h-100 g-brd-gray-light-v7 g-rounded-3">
        <div class="card-block g-font-weight-200 g-pa-20">
            <h1>  @Configuration.GetSection("WebsiteName").Value </h1>
         可选网络   <a href="http://47.91.220.168:9999"> <b>Conflux Pontus  </b>    </a>|  <a href="http://47.91.220.168:8888">  <b> Conflux 测试网  </b>   </a>
        </div>
    </div>
    <!-- End Panel -->
    <h5>如果没有订阅钱包地址，请先<a href="/home/register">订阅</a>,首次订阅请等半个小时再查看。 </h5>
    <div class="wrapper"><canvas id="chart-0"></canvas></div>
    <div class="toolbar">
        <div class="form-group">
            <label class="g-mb-10" for="inputGroup-1_4">钱包地址(可以用英文逗号分隔查询多个地址比如：0x0000000000000000000000000000000000000002,0x0000000000000000000000000000000000000003)</label>
            <div class="g-pos-rel">
                <textarea style="width: 800px;" id="txtAddress" class="form-control form-control-md g-brd-gray-light-v7 g-brd-gray-light-v3--focus g-rounded-20 g-px-14 g-py-10" type="text" placeholder="0x0000000000000000000000000000000000000001">0x0000000000000000000000000000000000000001</textarea>
            </div>
        </div>
    </div>

</div>
<div class="media-body align-self-center text-center">
    <a class="btn btn-xl u-btn-primary g-width-160--md g-font-size-default g-ml-10" id="btnSubmit">查询</a>
</div>
<script>
    var DATA_COUNT = 12;

    var utils = Samples.utils;

    utils.srand(110);

    function getLineColor(ctx) {
        return utils.color(ctx.datasetIndex);
    }

    function alternatePointStyles(ctx) {
        var index = ctx.dataIndex;
        return index % 2 === 0 ? 'circle' : 'rect';
    }

    function makeHalfAsOpaque(ctx) {
        return utils.transparentize(getLineColor(ctx));
    }

    function adjustRadiusBasedOnData(ctx) {
        var v = ctx.dataset.data[ctx.dataIndex];
        return v < 10 ? 5
            : v < 25 ? 7
                : v < 50 ? 9
                    : v < 75 ? 11
                        : 15;
    }

    function generateData() {
        return utils.numbers({
            count: DATA_COUNT,
            min: 0,
            max: 100
        });
    }
    function ajax() {
        var data;
        $.ajax({
            async: false,
            type: "get",
            url: "/home/GetChartByAddress?address=" + $('#txtAddress').val(),
            data: {

            },
            success: function (children) {
                data = children;
            }
        });
        return data;
    }
    var localAddress = localStorage.getItem('address');
    if (localAddress) {
        $('#txtAddress').val(localAddress);
    }
    $('#btnSubmit').click(function () {
        localStorage.setItem('address', $('#txtAddress').val());
        location.reload();
    });
    var data = ajax();

    setInterval(function () {
        location.reload();
    }, 20000);
    console.log(data, 64, generateData())
    var options = {
        legend: false,
        elements: {
            line: {
            },
            point: {
                backgroundColor: getLineColor,
                hoverBackgroundColor: makeHalfAsOpaque,

            }
        }, title: {
            display: true,
            text: $('#txtAddress').val()
        }
    };

    var chart = new Chart('chart-0', {
        type: 'line',
        data: data,
        options: options
    });


    // eslint-disable-next-line no-unused-vars
    function addDataset() {
        chart.data.datasets.push({
            data: generateData()
        });
        chart.update();
    }

    // eslint-disable-next-line no-unused-vars
    function randomize() {
        chart.data.datasets.forEach(function (dataset) {
            dataset.data = generateData();
        });
        chart.update();
    }

    // eslint-disable-next-line no-unused-vars
    function removeDataset() {
        chart.data.datasets.shift();
        chart.update();
    }
</script>